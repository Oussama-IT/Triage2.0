<?xml version="1.0" encoding="UTF-8"?><record_update table="sysauto_script">
    <sysauto_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <business_calendar/>
        <condition/>
        <conditional>false</conditional>
        <entered_time>1970-01-01 00:00:00</entered_time>
        <max_drift/>
        <name>CECCE set date state </name>
        <offset/>
        <offset_type>0</offset_type>
        <run_as display_value="ServiceNowDeveloper3 CECCE">36406d381b3721108d594047bc4bcbeb</run_as>
        <run_as_tz/>
        <run_dayofmonth>1</run_dayofmonth>
        <run_dayofweek>1</run_dayofweek>
        <run_period/>
        <run_start>2024-04-24 18:00:17</run_start>
        <run_time>1970-01-01 05:00:00</run_time>
        <run_type>monthly</run_type>
        <script><![CDATA[    var d = new Date();
    var month = d.getMonth();
    if (month == 7) {

        try {
            var grroi = new GlideRecord('x_ndecd_triage_2_0_envoi_d_un_formulaire_de_consentement_pour_le_programme_roi');
            //grroi.addQuery('sys_id', 'aafc93382f1cce103eb1bab62799b6fb');
            grroi.query();


            while (grroi.next()) {
                //grroi.ann_e_de_la_demande_int=currentYear;
                if (grroi.etat_annee == '2') {
                    grroi.etat_annee = 1;

                } else if (grroi.etat_annee == '1') {
                    // test niveau scolaire
                    // sk 74911a0d1b413950d991c882604bcbc3 
                    // jk 78911a0d1b413950d991c882604bcbc2
                    // 1ere 74911a0d1b413950d991c882604bcb59
                    // 2eme 74911a0d1b413950d991c882604bcb5b
                    if (grroi.eleve.u_classe == "74911a0d1b413950d991c882604bcbc3" || grroi.eleve.u_classe == "78911a0d1b413950d991c882604bcbc2" || grroi.eleve.u_classe == "74911a0d1b413950d991c882604bcb59") {
                        grroi.etat_annee = 1;
                    } else {
                        grroi.etat_annee = 0;
                    }


                } else if (grroi.etat_annee == '0') {

                    grroi.etat_annee = 10;

                } else {
                    grroi.etat_annee = 10;
                }

                // Add your code here
                grroi.update();

            }

            var grsli = new GlideRecord('x_ndecd_triage_2_0_demandes_priorisation_sli');
            grsli.query();

            while (grsli.next()) {

                if (grsli.etat_annee == '2') {
                    grsli.etat_annee = 1;

                } else if (grsli.etat_annee == '1') {
                    // test niveau scolaire
                    // sk 74911a0d1b413950d991c882604bcbc3 
                    // jk 78911a0d1b413950d991c882604bcbc2
                    // 1ere 74911a0d1b413950d991c882604bcb59
                    // 2eme 74911a0d1b413950d991c882604bcb5b
                    if (grsli.nom_de_l_l_ve.u_classe == "74911a0d1b413950d991c882604bcbc3" || grsli.nom_de_l_l_ve.u_classe == "78911a0d1b413950d991c882604bcbc2" || grsli.nom_de_l_l_ve.u_classe == "74911a0d1b413950d991c882604bcb59") {
                        grsli.etat_annee = 1;
                    } else {
                        grsli.etat_annee = 0;
                    }


                } else if (grsli.etat_annee == '0') {

                    grsli.etat_annee = 10;

                } else {
                    grsli.etat_annee = 10;
                }

                grsli.update();

            }
			
            var grroics = new GlideRecord('x_ndecd_triage_2_0_roi_cs');
            grroics.query();

            while (grroics.next()) {
                if (grroics.etat_annee == '2') {
                    grroics.etat_annee = 1;

                } else if (grroics.etat_annee == '1') {
                    // test niveau scolaire
                    // sk 74911a0d1b413950d991c882604bcbc3 
                    // jk 78911a0d1b413950d991c882604bcbc2
                    // 1ere 74911a0d1b413950d991c882604bcb59
                    // 2eme 74911a0d1b413950d991c882604bcb5b
                    if (grroics.eleve.u_classe == "74911a0d1b413950d991c882604bcbc3" || grroics.eleve.u_classe == "78911a0d1b413950d991c882604bcbc2" || grroics.eleve.u_classe == "74911a0d1b413950d991c882604bcb59") {
                        grroics.etat_annee = 1;
                    } else {
                        grroics.etat_annee = 0;
                    }


                } else if (grroics.etat_annee == '0') {

                    grroics.etat_annee = 10;

                } else {
                    grroics.etat_annee = 10;
                }


                grroics.update();

            }



        } catch (e) {
            gs.info("scheduleerr" + e);
        }
    }
	if ( month == 11 ){
		var grscs = new GlideRecord('x_ndecd_triage_2_0_scs');
            grscs.query();
            while (grscs.next()) {

                if (grscs.etat_annee == '2') {
                    grscs.etat_annee = 1;

                } else if (grscs.etat_annee == '1') {
                    // test niveau scolaire
                    // sk 74911a0d1b413950d991c882604bcbc3 
                    // jk 78911a0d1b413950d991c882604bcbc2
                    // 1ere 74911a0d1b413950d991c882604bcb59
                    // 2eme 74911a0d1b413950d991c882604bcb5b
                    if (grscs.eleve.u_classe == "74911a0d1b413950d991c882604bcbc3" || grscs.eleve.u_classe == "78911a0d1b413950d991c882604bcbc2" ) {
                        grscs.etat_annee = 1;
                    } else {
                        grscs.etat_annee = 0;
                    }


                } else if (grscs.etat_annee == '0') {

                    grscs.etat_annee = 10;

                } else {
                    grscs.etat_annee = 10;
                }

                grscs.update();

            }
	}]]></script>
        <sys_class_name>sysauto_script</sys_class_name>
        <sys_created_by>servicenowdeveloper3@ecolecatholique.ca</sys_created_by>
        <sys_created_on>2024-04-24 18:02:09</sys_created_on>
        <sys_id>89195ac91b350650d991c882604bcb91</sys_id>
        <sys_mod_count>38</sys_mod_count>
        <sys_name>CECCE set date state </sys_name>
        <sys_package display_value="Triage 2.0" source="x_ndecd_triage_2_0">c48de0481bafed508d594047bc4bcb3d</sys_package>
        <sys_policy/>
        <sys_scope display_value="Triage 2.0">c48de0481bafed508d594047bc4bcb3d</sys_scope>
        <sys_update_name>sysauto_script_89195ac91b350650d991c882604bcb91</sys_update_name>
        <sys_updated_by>ServiceNowDeveloper2@ecolecatholique.ca</sys_updated_by>
        <sys_updated_on>2024-09-19 19:28:03</sys_updated_on>
        <time_zone>Canada/Eastern</time_zone>
        <upgrade_safe>false</upgrade_safe>
    </sysauto_script>
</record_update>
